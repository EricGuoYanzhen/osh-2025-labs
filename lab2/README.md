# Shell 编写

## Task0

贴了一下示例代码，会用 `make` 和 `make clean`

## Task1

- `pwd` 命令  
  直接调 `getcwd()` 输出就可以了

- `cd` 命令  
  用 `prev_dir` 记录一下上一次的目录，再调用 `chdir()` 即可  
  **选做功能：** 实现了 `cd` 在没有第二个参数时，默认进入家目录及 `cd -` 可以切换为上一次所在的目录的功能

**遗留问题：** 无法处理多空格，应对 `getline()` 和 `split()` 进行改进

## Task 2

- 管道 ` | `  
  将 ` | ` 作为分割符分割命令，然后新建子进程即可。但是 `|` 两端须有空格

**遗留问题的部分处理：** 支持忽略行命令前的空白，但是命令间的多空白还未处理

## Task 3

- 重定向 ` > ` ` >> ` ` < `  
  新增一个辅助函数 `handle_redirection()` 用来修改参数即可
  **选做功能：** 支持数字文件描述符，但文本重定向与 `EOF` 重定向未做测试

## Task 4

- `Ctrl-C` 信号处理  
  添加信号处理，以及 `SIGINT` 的识别

## Task 5

To be done.

## 拓展功能

- 支持 `history` 但不支持上下键切换
- 支持 `Ctrl-D` 功能
- 支持 `time` 命令

## **代码鲁棒性：**

1. 对 `split()` 函数进行了大幅改进，使其能够命令间的空白，并支持两端无空格的管道符 `|` 以及各种重定向符

2. 将管道、重定向与处理外部函数块合并

3. 进行了大规模函数化重构
